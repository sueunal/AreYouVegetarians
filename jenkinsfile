pipeline {
    agent any

    stages {
        stage('📥 Checkout') {
            steps {
                echo 'Git 저장소에서 프로젝트 코드 가져오기'
                checkout scm
            }
        }

        stage('🛠️ Build') {
            steps {
                echo 'Xcode 프로젝트 빌드 시작'
                sh '''
                cd AreYouVegetarians
                xcodebuild clean -project AreYouVegetarians.xcodeproj -scheme AreYouVegetarians -configuration Debug
                '''
            }
        }

        stage('🧪 Test') {
            steps {
                echo 'Xcode 테스트 실행'
                sh '''
                cd AreYouVegetarians
                xcodebuild test -project AreYouVegetarians.xcodeproj -scheme AreYouVegetarians -destination "platform=iOS Simulator,name=iPhone 14,OS=16.4"
                '''
            }
        }

        stage('✅ Done') {
            steps {
                echo '✅ 빌드 & 테스트 완료'
            }
        }
    }
}

